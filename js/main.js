var Utils=null;!function(e){Utils={activePreloader:void 0,removePreloader:function(){return this.isIE8()?(e(".loader-ie8").hide(),this):(this.activePreloader=void 0,void 0)},addPreloaderTo:function(t){if(this.activePreloader&&this.removePreloader(),this.isIE8())return e("#"+t).addClass("loader-ie8").show(),this;var o=new CanvasLoader(t);this.activePreloader=o,o.setColor("#1b1e23"),o.setShape("roundRect"),o.setDiameter(45),o.setDensity(160),o.setRange(.8),o.setSpeed(4),o.setFPS(60),o.show();var n=document.getElementById("canvasLoader");n.style.position="absolute",n.style.top=o.getDiameter()*-.5+"px",n.style.left=o.getDiameter()*-.5+"px"},hasFixed:function(){var e=navigator.userAgent;return e.match(/Android 2\.[1256]/)&&e.indexOf("AppleWebKit")>-1||e.match(/Opera Mobi\/([0-9]+)/)&&RegExp.$1<7458||e.match(/Fennec\/([0-9]+)/)&&RegExp.$1<6||e.match(/(iPhone|iPod|iPad)/)&&e.match(/OS [1-4]_\d(_\d)? like Mac OS X/i)?!1:!0},addEvent:function(e,t,o){e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent("on"+t,o)},isMobile:{android:function(){return navigator.userAgent.match(/android/i)},blackberry:function(){return navigator.userAgent.match(/blackberry/i)},ios:function(){return navigator.userAgent.match(/iphone|ipad|ipod/i)},opera:function(){return navigator.userAgent.match(/opera mini/i)},windows:function(){return navigator.userAgent.match(/iemobile/i)},any:function(){var e=Utils.isMobile;return e.android()||e.blackberry()||e.ios()||e.opera()||e.windows()}},isMobileMedia:function(){var t=window.innerWidth?window.innerWidth:e(window).width();return 640>=t?!0:!1},isRetina:function(){var e="(-webkit-min-device-pixel-ratio: 1.5),			                  (min--moz-device-pixel-ratio: 1.5),			                  (-o-min-device-pixel-ratio: 3/2),			                  (min-resolution: 1.5dppx)";return window.devicePixelRatio>1?!0:window.matchMedia&&window.matchMedia(e).matches?!0:!1},isIE8:function(){var e=window.navigator.userAgent;return e.search(/msie/gi)>=0&&e.search(/8.0/gi)>=0?!0:!1},preloadImages:function(t){for(var o=e.Deferred(),n=[],a=0;a<t.length;a++)!function(e,t){var o=new Image;o.onload=function(){t.resolve()},o.src=e}(t[a],n[a]=e.Deferred());return e.when.apply(e,n).done(function(){o.resolve()}),o}};var t="click",o={init:function(){this.bindExternal(),this.responsiveImages(),this.navigation=new a,Utils.isMobile.any()?(this.scrollToTop(),this.addBodyMobileClass(),this.loadHomePageParallax(function(){o.homePageParallaxMobile(),o.bindHomePageParallaxSlideControl(),o.homePageLoadImagesMobileAny()})):this.loadHomePageParallax(function(){o.bindHomePageParallaxSlideControl(),o.homePageParallax(),o.homePageLoadImagesWeb()}),this.addPageBackground(),this.bindTeamForm(),this.bindPortfolioForm(),this.bindCustomSelect(),this.bindOverlay(),this.retinaScan(),this.deepLinks()},deepLinks:function(){e.address.change(function(t){if(e(".team-menu-options").length>0){var o=t.pathNames[0];e(".team-menu-options a").each(function(){return e(this).attr("href")=="#"+o?(e(this).click(),void 0):void 0})}})},retinaScan:function(){image_selector="img.retina",bg_selector="*",retina_sulfix="@2x";var t=window.devicePixelRatio>1;1==t&&(e(image_selector).each(function(t,o){var n=o.getAttribute("src"),a=n.replace(/\.\w+$/,function(e){return retina_sulfix+e});e.ajax({url:a,type:"HEAD",success:function(){var e=new Image;e.setAttribute("src",n),setTimeout(function(){o.setAttribute("height",e.height+"px"),o.setAttribute("width",e.width+"px"),o.setAttribute("src",a)},1)}})}),e(bg_selector).filter(function(){return this.currentStyle?"none"!==this.currentStyle.backgroundImage:window.getComputedStyle?"none"!==document.defaultView.getComputedStyle(this,null).getPropertyValue("background-image"):void 0}).each(function(){var t=e(this),o=t.css("background-image").replace(/url\("|"\)$/gi,"").replace(/url\(|\)$/gi,"");if(o.length>0){var n=o.replace(/\.\w+$/,function(e){return retina_sulfix+e});".gif"!=o.substr(o.length-4,o.length)&&e.ajax({url:n,type:"HEAD",success:function(){var e=new Image;e.setAttribute("src",o),setTimeout(function(){t.css("background-size",e.width+"px "+e.height+"px"),t.css("background-image",'url("'+n+'")')},1)}})}}))},homePageParallax:function(){document.querySelector(".home-page").className=document.querySelector(".home-page").className+" loaded",Utils.removePreloader(),skrollr.init({forceHeight:!1}).refresh()},homePageLoadImagesMobileAny:function(){e(".home-page .main-content section .home-page-subslide").each(function(t,o){e(o).css("background-image","url("+e(o).attr("data-imagemobi")+")")})},homePageLoadImagesWeb:function(){e(".home-page .main-content section .home-page-subslide").each(function(){})},homePageParallaxMobile:function(){var e=this;setTimeout(function(){document.querySelector(".home-page").className=document.querySelector(".home-page").className+" loaded",e.scrollToTop()},200)},bindHomePageParallaxSlideControl:function(){var t=this;e("#main-content").on("touchstart click",".slider-control",function(e){e.preventDefault(),e.stopPropagation(),Utils.isMobile.any()?t.gotoSlideMobile(this):t.gotoSlideDesktop(this)})},scrollToTop:function(){setTimeout(function(){window.scrollTo(0,1)},100)},gotoSlideMobile:function(t){var o=parseInt(e(t).closest(".home-page-section")[0].className.replace(/[^0-9]/gi,""),10),n=0;4==o?n=64:(o++,n=e("#slide-"+o).offset().top),e("html, body").animate({scrollTop:n},400)},gotoSlideDesktop:function(){var t=document.querySelectorAll(".home-page-subslide"),o=t.length,n=e(document).height(),a=Math.ceil(n/o),i=e(document).scrollTop(),r=i%a,s=Math.ceil(i/a),l=400;0===r?s++:s,s===o?s=0:s,s===o?l=2e3:l,e("html,body").scrollTo(s*a,l,{easing:"swing"})},bindExternal:function(){e(document.body).on(t,"[rel=external]",function(e){e.preventDefault(),window.open(this.href)})},addPageBackground:function(){var t=document.body.getAttribute("data-background");t&&(e("body").css("background",'url("/'+t+'") no-repeat center center fixed'),e("body").css("webkit-background-size","cover"),e("body").css("moz-background-size","cover"),e("body").css("o-background-size","cover"),e("body").css("background-size","cover"))},addBodyMobileClass:function(){document.body.className=document.body.className+" mobile-device"},loadHomePageParallax:function(t){if(e(".home-page-section").length){Utils.addPreloaderTo("loader");var o=[],n=this;e.when(Utils.preloadImages(o)).then(function(){e.isFunction(t)&&t.call(n)})}},dynamicContentRequest:void 0,dynamicContentTimer:void 0,renderDynamicContent:function(t){var o=this,n=document.querySelector(".dynamic-container"),a=document.querySelector(".dynamic-content");clearTimeout(o.dynamicContentTimer),o.dynamicContentRequest&&(o.dynamicContentRequest.abort(),o.dynamicContentRequest=void 0),e(n).addClass("loading"),o.dynamicContentRequest=e.ajax({url:t.url,cache:!1,data:t.data,success:t.done}).done(function(i){e(n).removeClass("loading"),e(a).addClass("hide").empty().html(i),Modernizr.testProp("transition")&&e(a).outerWidth(e(a).outerWidth()),e(a).addClass("show"),o.dynamicContentTimer=setTimeout(function(){clearTimeout(o.dynamicContentTimer),e(a).removeClass("hide").removeClass("show").removeAttr("style"),Utils.removePreloader()},Modernizr.testProp("transition")?300:0),t.afterDone&&t.afterDone()}).fail(function(){})},getAtributesToFilter:function(t){var n=e(".portfolio-visibility-options"),a=n.find(".current button"),i=n.find(".exists button"),r=e(".portfolio-finance-options"),s=r.find(".portfolio button"),l=r.find(".seed-fund button"),c=new Object;if(c.exists=i.hasClass("active"),c.current=a.hasClass("active"),c.seedFund=l.hasClass("active"),c.portfolio=s.hasClass("active"),0==t||void 0==t){var d=e(".portfolio-sector-options ul"),u=d.find(".active").data("id");c.selectedOptionId=u,o.updateSectorSelect(c,function(e){o.renderDynamicContent({url:"/portfolio/filter",data:e,cache:!1,done:function(){}})})}else{var d=e(".portfolio-sector-options ul"),u=d.find(".active").data("id");c.selectedOptionId=u,o.renderDynamicContent({url:"/portfolio/filter",data:c,cache:!1,done:function(){}})}},updateSectorSelect:function(t,o){t.selectedOptionId="",e.ajax({url:"/portfolio/update-select",data:t,success:function(n){e(".portfolio-sector-options .select-box ul").html(n),e(".portfolio-sector-options .select-box p").attr("data-default","filter by sector"),e(".portfolio-sector-options .select-box p").html("Filter by Sector");var a=e(".portfolio-section-title"),i=a.find(".ico");a.find(".title").html("All Sectors"),i.attr("class","ico"),o(t)}})},bindTeamForm:function(){var t=this,n=function(){e(".team-container .no-content").addClass("inactive"),e(".team-content").addClass("active")};if(document.querySelector(".team-menu")){var a=document.querySelector(".team-menu-options");document.querySelectorAll(".team-menu-options .button");var i=function(i){i.preventDefault();var r=e(i.currentTarget),s=r.data("id"),l=r.hasClass("active");n(),l||(e(a).find(".active").removeClass("active"),e("[data-team].active").removeClass("active"),e("[data-team="+s+"]").addClass("active"),r.addClass("active"),e.address.pathNames().length<=1&&(o.hideOverlay(),e.address.value(r.attr("href").replace(/^#/,""))),t.renderDynamicContent({url:"/team/filter",data:{team_id:s},afterDone:function(){e.address.pathNames().length>1&&e(".show-overlay.more").each(function(){return e(this).attr("href").replace("#","#/")=="#"+e.address.path()?(e(this).click(),void 0):void 0})}}))};e(".team-menu-options .button.inactive").on("click",function(e){i(e)})}},bindPortfolioForm:function(){function n(){e(s).find(".disabled").removeClass("disabled")}function a(){e(s).find(".button").addClass("disabled")}if(document.querySelector(".portfolio-menu")){var i=document.querySelector(".portfolio-menu");i.querySelectorAll('input[type="hidden"]');var r=document.querySelector(".portfolio-finance-options"),s=document.querySelector(".portfolio-visibility-options"),l=function(t){t.preventDefault();var n=e(t.currentTarget);if(n.hasClass("disabled"))return this;var a=e("input[name="+n.data("name")+"]");n.hasClass("active")?a.val(!1):(e(s).find(".active").removeClass("active"),n.addClass("active"),a.val(!0),o.getAtributesToFilter())};Modernizr.touch?e.fastButton(".portfolio-visibility-options .button",function(e){l(e)}):e(s).on(t,".button",function(e){l(e)});var c=function(t){t.preventDefault();var i=e(t.currentTarget),s=i.hasClass("active");return s?(e("input[name="+i.data("name")+"]").val(""),void 0):(e(r).find(".active").removeClass("active"),i.addClass("active"),e("input[name="+i.data("name")+"]").val(i.data("value")),i.hasClass("portfolio")?n():a(),o.getAtributesToFilter(),void 0)};Modernizr.touch?e.fastButton(".portfolio-finance-options .button",function(e){c(e)}):e(r).on(t,".button",function(e){c(e)})}},bindCustomSelect:function(){e(".select-box").each(function(){new n(this,{onSelect:function(e){var t=document.querySelector(".portfolio-section-title");t.querySelector(".title").innerHTML=e.innerHTML,o.getAtributesToFilter(!0)},onRemove:function(){var e=document.querySelector(".portfolio-section-title"),t=e.querySelector(".ico");e.querySelector(".title").innerHTML=e.querySelector(".title").getAttribute("data-default"),t.className=t.className.split(" ")[0]}})})},bindOverlay:function(){var n=this,a=0;o.hideOverlay=function(){e(".overlay-content.new").length>0?(e(".overlay-content.new").removeClass("hide"),e(".overlay-content.new").removeClass("show"),Modernizr.testProp("transition")&&e(".overlay-content.new").outerWidth(e(".overlay-content.new").outerWidth()),e(".overlay-content.new").fadeOut(400),setTimeout(function(){e(".overlay-content.new").remove(),e(".overlay-content").removeClass("hide"),e(".overlay-content").removeClass("show"),Modernizr.testProp("transition")&&e(".overlay-content").outerWidth(e(".overlay-content").outerWidth()),e(".overlay-content").fadeIn(400)},500)):(e(".overlay-content").removeClass("hide"),e(".overlay-content").removeClass("show"),Modernizr.testProp("transition")&&e(".overlay-content").outerWidth(e(".overlay-content").outerWidth()),e(".overlay-content").fadeOut(400),setTimeout(function(){e(".overlay-container").removeClass("standalone"),e(".container").removeClass("full-viewport"),e(".main-content").show(),Modernizr.testProp("transition")&&e(".overlay-container").outerWidth(e(".overlay-container").outerWidth()),e(".overlay-container").removeClass("opaque");var t=setTimeout(function(){e(".overlay-container").removeClass("loaded"),e(".overlay-container").hide(),clearTimeout(t)},Modernizr.testProp("transition")?450:0)},500))},e("body").on(t,".show-overlay-new",function(t){t.preventDefault();var o=this;e(".overlay-content").removeClass("hide"),e(".overlay-content").removeClass("show"),Modernizr.testProp("transition")&&e(".overlay-content").outerWidth(e(".overlay-content").outerWidth()),e(".overlay-content").fadeOut(400),setTimeout(function(){e.ajax({url:e(o).data("url")}).done(function(t){n.scrollToTop();var o=setTimeout(function(){e(".overlay-content.new").remove(),e(".overlay-container").append(t.replace("overlay-content","overlay-content new")),e(".overlay-content.new").addClass("hide"),Modernizr.testProp("transition")&&e(".overlay-content.new").outerWidth(e(".overlay-content.new").outerWidth()),e(".overlay-content.new").addClass("show"),clearTimeout(o)},400)}).fail(function(){e(".overlay-content").removeClass("hide"),e(".overlay-content").removeClass("show"),Modernizr.testProp("transition")&&e(".overlay-content").outerWidth(e(".overlay-content").outerWidth()),e(".overlay-content").fadeIn(400)})},500)}),e("body").on(t,".show-overlay",function(t){t.preventDefault();var i=this;a=e(window).scrollTop(),e(".overlay-container").remove(),e(".container").append(e("<div />").addClass("overlay-container")),e(".overlay-container").append(e("<div />").prop("id","loader-overlay")),Modernizr.testProp("transition")&&e(".overlay-container").outerWidth(e(".overlay-container").outerWidth()),e(".overlay-container").addClass("opaque");var r=setTimeout(function(){e(".container").addClass("full-viewport"),clearTimeout(r),e.ajax({url:e(i).data("url")}).done(function(t){e(".container").addClass("loaded"),e(".overlay-container").addClass("loading"),n.scrollToTop();var o=setTimeout(function(){e(".overlay-container").removeClass("loading"),e(".overlay-container").append(t),e(".overlay-content").addClass("hide"),Modernizr.testProp("transition")&&e(".overlay-content").outerWidth(e(".overlay-content").outerWidth()),e(".overlay-content").addClass("show"),e(".overlay-container").addClass("standalone"),e(".main-content").hide(),clearTimeout(o),e.address.value(e(i).attr("href").replace(/^#/,""))},400)}).fail(function(){o.hideOverlay()})},Modernizr.testProp("transition")?450:0)}),e("body").on(t,".show-overlay-without-preloader",function(t){t.preventDefault();var i=this;a=e(window).scrollTop(),e(".overlay-container").remove(),e(".container").append(e("<div />").addClass("overlay-container")),e(".overlay-container").append(e("<div />").prop("id","loader-overlay")),Modernizr.testProp("transition")&&e(".overlay-container").outerWidth(e(".overlay-container").outerWidth()),e(".overlay-container").addClass("opaque");var r=setTimeout(function(){e(".container").addClass("full-viewport"),clearTimeout(r),e.ajax({url:e(i).data("url")}).done(function(t){e(".container").addClass("loaded"),e(".main-content").hide(),e(".overlay-container").addClass("loading"),n.scrollToTop();var o=setTimeout(function(){e(".overlay-container").removeClass("loading"),e(".overlay-container").append(t),e(".overlay-content").addClass("hide"),Modernizr.testProp("transition")&&e(".overlay-content").outerWidth(e(".overlay-content").outerWidth()),e(".overlay-content").addClass("show"),e(".overlay-container").addClass("standalone"),e(".overlay-container").removeAttr("style"),e(".overlay-content").removeAttr("style"),clearTimeout(o)},100)}).fail(function(){o.hideOverlay()})},Modernizr.testProp("transition")?450:0)}),e("body").on(t,".close-overlay",function(e){e.preventDefault(),o.hideOverlay()})},responsiveImages:function(){var e=document.querySelectorAll("img.responsive"),t="desktop";if(e.length)for(var o=0,n=e.length;n>o;o++)Utils.isMobileMedia()&&(t="mobile",Utils.isRetina()&&(t="mobile2x")),e[o].setAttribute("src",e[o].getAttribute("data-"+t))}},n=function(o,n){function a(){d.isActive=!0,v.text(d.defaultVal),v.addClass("active").next().show()}function i(){d.isActive=!1,""!==d.activeValue?v.text(d.activeValue):v.text(d.defaultVal),v.removeClass("active").next().hide()}function r(){d.isActive?i():a()}function s(e){f[0].value=e,v.text(e),m.find(".active").removeClass("active"),m.find('[data-value="'+e+'"]').addClass("active")}function l(){d.activeValue="",f[0].value="",m.find(".active").removeClass("active")}function c(t){var o=t.getAttribute("data-value");o===d.activeValue?(l(),e.isFunction(d.settings.onRemove)&&d.settings.onRemove(t)):(s(o),e.isFunction(d.settings.onSelect)&&d.settings.onSelect(t)),i()}var d=this,u=e(o),v=u.find(".label"),m=u.find("ul");u.find("li");var f=e('input[name="'+u.data("name")+'"]');this.settings=e.extend({},n),this.activeValue="",this.isActive=!1,this.defaultVal=v.data("default");var h=function(e){e.preventDefault(),r()};Modernizr.touch?e.fastButton(e(o).selector+" .label",function(e){h(e)}):e(o).on(t,".label",function(e){h(e)});var p=function(e){e.preventDefault(),c(e.currentTarget)};Modernizr.touch?e(o).find("li").fastButton(function(e){p(e)}):e(o).on(t,"li",function(e){p(e)});var y=function(e){d.isActive&&(e.preventDefault(),i())};e(document).mouseup(function(e){u.is(e.target)||0!==u.has(e.target).length||y(e)})},a=function(){this.isActive=!1,this.actualLeftOfToggler=0;var n=this,a=document.querySelector("#navigation"),i=document.querySelector(".main-navigation-content"),r=document.querySelector("#navigation-toggler"),s=document.querySelector(".main-header-container"),l=function(){return e(document).height()},c=20,d=function(){return a.offsetWidth+c},u=function(){if(!o.navigation.isActive){if(e(a).addClass("visible"),e(r).addClass("active"),n.menuIsStillOpen=!0,o.navigation.isActive=!0,f(),Modernizr.testProp("transition"))a.className=a.className+" active",s.className=s.className+" active";else{var t=parseInt(e(window).width(),10);e(s).stop().animate({left:t>640?260:220},200),e(i).stop().animate({left:0},200)}var l=setTimeout(function(){h(),n.menuIsStillOpen=!1,clearTimeout(l)},300)}},v=function(){if(o.navigation.isActive){o.navigation.isActive=!1,e(r).removeClass("active"),Modernizr.testProp("transition")?(a.className=a.className.replace(/active/gi,""),s.className=s.className.replace(/active/gi,"")):(e(s).stop().animate({left:0},200),e(i).stop().animate({left:-d()},200));var t=setTimeout(function(){p(),n.menuIsStillOpen||e(a).removeClass("visible"),clearTimeout(t)},300)}},m=function(){o.navigation.isActive?v():u()},f=function(){var t=l(),o=e(i).height();o>t&&(t=o),a.style.height=t+"px"},h=function(){e(".close-overlay-mask").on(t,function(e){e.preventDefault(),e.stopPropagation(),v()})},p=function(){e(".close-overlay-mask").off(t)},y=function(){var t=function(e){e.preventDefault(),e.stopPropagation(),m()};Modernizr.touch?e.fastButton("#navigation-toggler",function(e){return t(e),!1}):e("#navigation-toggler").on("click",function(e){return t(e),!1})},g=function(){Utils.isMobile.any()&&(Utils.addEvent(window,"resize",f),f())},b=function(){e(".main-navigation-content").bind("touchy-swipe",function(e,t,o){e.preventDefault(),"left"===o.direction&&v()})};return y(),g(),Utils.isMobile.any()&&b(),{openNav:u,closeNav:v,toggleNav:m}};e(function(){o.init()})}(jQuery);